<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>API Donzy — TikTok Downloader UI</title>
<style>
  :root{
    --bg1:#5ee7df;
    --bg2:#7b61ff;
    --card-bg: rgba(255,255,255,0.06);
    --glass: rgba(255,255,255,0.04);
    --accent: #9b7bff;
    --text: #eaf2ff;
    --muted: rgba(234,242,255,0.7);
    --success: #4ade80;
    --danger: #ff7b7b;
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
  }
  html,body{
    height:100%;
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    -webkit-font-smoothing:antialiased;
    color:var(--text);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px;
    box-sizing:border-box;
  }

  .wrap{
    width:100%;
    max-width:980px;
  }

  .card {
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    border-radius:16px;
    padding:22px;
    box-shadow: 0 6px 30px rgba(11,12,30,0.25);
    backdrop-filter: blur(8px) saturate(120%);
    border:1px solid rgba(255,255,255,0.06);
  }

  .header {
    display:flex;
    gap:14px;
    align-items:center;
    margin-bottom:16px;
  }

  .logo {
    width:58px;
    height:58px;
    display:grid;
    place-items:center;
    border-radius:12px;
    background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
    border: 1px solid rgba(255,255,255,0.06);
  }

  .title {
    display:flex;
    flex-direction:column;
  }
  .title h1{
    margin:0;
    font-size:18px;
    letter-spacing: -0.2px;
  }
  .title p{
    margin:2px 0 0 0;
    color:var(--muted);
    font-size:13px;
  }

  .controls {
    display:flex;
    gap:10px;
    margin-top:12px;
    align-items:center;
  }

  .input-wrap{
    display:flex;
    gap:8px;
    align-items:center;
    margin-bottom:12px;
  }

  input[type="url"]{
    flex:1;
    min-width:0;
    padding:12px 14px;
    background:var(--glass);
    color:var(--text);
    border:1px solid rgba(255,255,255,0.04);
    border-radius:10px;
    outline:none;
    font-size:14px;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,0.12);
  }
  input[type="url"]::placeholder{ color: rgba(234,242,255,0.45) }

  .btn {
    border: none;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
    display:inline-flex;
    gap:8px;
    align-items:center;
    justify-content:center;
  }
  .btn-primary{
    background: linear-gradient(90deg, #6dd3ff, #7b61ff);
    color: #061124;
    box-shadow: 0 6px 18px rgba(123,97,255,0.18);
  }
  .btn-ghost{
    background:transparent;
    color:var(--text);
    border:1px solid rgba(255,255,255,0.06);
  }
  .btn:active{ transform: translateY(1px); }

  .row {
    display:flex;
    gap:12px;
    align-items:center;
    flex-wrap:wrap;
  }

  .endpoint {
    margin-top:12px;
    display:flex;
    gap:8px;
    align-items:center;
    background: rgba(0,0,0,0.08);
    padding:8px 10px;
    border-radius:8px;
    font-size:13px;
    color:var(--muted);
    word-break:break-all;
  }

  .badge {
    background: linear-gradient(90deg,#9b7bff,#6dd3ff);
    color:#071024;
    padding:6px 8px;
    border-radius:8px;
    font-weight:700;
    font-size:12px;
  }

  .result {
    margin-top:18px;
    display:grid;
    grid-template-columns: 1fr 290px;
    gap:14px;
  }

  .json-box{
    background: rgba(6,8,20,0.45);
    border-radius:12px;
    padding:14px;
    height:420px;
    overflow:auto;
    border:1px solid rgba(255,255,255,0.04);
  }

  pre {
    font-family: var(--mono);
    font-size:13px;
    line-height:1.5;
    color: #e6f0ff;
    margin:0;
    white-space:pre-wrap;
    word-break:break-word;
  }

  .side {
    display:flex;
    flex-direction:column;
    gap:10px;
    min-width:0;
  }

  .side .card-mini {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:10px;
    padding:10px;
    border:1px solid rgba(255,255,255,0.04);
  }

  .muted { color: var(--muted); font-size:13px; }

  .actions { display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; }

  .copy-btn { padding:8px 10px; border-radius:8px; font-weight:600; cursor:pointer; border:0; }
  .copy-success { background:var(--success); color:#032012; }
  .copy-primary { background: linear-gradient(90deg,#6dd3ff,#7b61ff); color:#021021; }

  .small { font-size:13px; color:var(--muted); }

  .svg-icon { width:18px;height:18px; display:inline-block; vertical-align:middle; }

  .footer {
    margin-top:14px;
    color:var(--muted);
    font-size:13px;
    display:flex;
    justify-content:space-between;
    gap:10px;
  }

  @media (max-width:920px){
    .result { grid-template-columns: 1fr; }
    .json-box{ height:360px; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="region" aria-label="API Donzy UI">
      <div class="header">
        <div class="logo" aria-hidden="true">
          <!-- folder download icon -->
          <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="6" width="20" height="14" rx="2" fill="rgba(255,255,255,0.06)"/>
            <path d="M3 8c0-1 1-2 2-2h3l2 2h8c1 0 2 .9 2 2v1" stroke="white" stroke-opacity="0.9" stroke-width="0.8" fill="none"/>
            <path d="M12 11v5" stroke="#9b7bff" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M9.75 13.75L12 11l2.25 2.75" stroke="#9b7bff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="title">
          <h1>API Donzy — TikTok Downloader</h1>
          <p>Simple UI untuk <strong>api-donzy</strong>. Creator: <strong>donzy</strong></p>
        </div>
        <div style="margin-left:auto" class="small">Modern • Simple • Gradient</div>
      </div>

      <div class="input-wrap">
        <input id="urlInput" type="url" placeholder="Masukkan link TikTok (contoh: https://www.tiktok.com/@user/video/12345)" />
        <div class="row">
          <button id="btnGet" class="btn btn-primary" title="Get TikTok V1">
            <!-- download icon -->
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none"><path d="M12 3v12" stroke="#061124" stroke-width="1.6" stroke-linecap="round"/><path d="M8.5 9.5L12 13l3.5-3.5" stroke="#061124" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><rect x="4" y="16" width="16" height="3" rx="1.2" fill="#061124" /></svg>
            Get
          </button>

          <button id="btnGetV2" class="btn btn-ghost" title="Get TikTok V2">
            TikTok V2
          </button>
        </div>
      </div>

      <div class="controls">
        <div class="endpoint">
          <span class="badge">Endpoint</span>
          <div id="endpointUrl" style="margin-left:8px;">/api/tiktok?url=...</div>
          <button id="copyEndpoint" class="btn btn-ghost" style="margin-left:auto">Copy</button>
        </div>
      </div>

      <div class="result">
        <div class="json-box" id="jsonBox" aria-live="polite">
          <pre id="jsonOutput">No response yet. Paste a TikTok URL and click <strong>Get</strong>.</pre>
        </div>

        <div class="side">
          <div class="card-mini">
            <div class="muted">Response actions</div>
            <div class="actions">
              <button id="btnCopy" class="copy-btn copy-primary">Copy Response</button>
              <button id="btnDownload" class="copy-btn btn-ghost">Download JSON</button>
              <button id="btnClear" class="copy-btn btn-ghost">Clear</button>
            </div>
          </div>

          <div class="card-mini">
            <div class="muted">Info</div>
            <div style="margin-top:8px;">
              <div class="small">Status: <span id="statusTag" style="color:var(--muted)">idle</span></div>
              <div class="small" style="margin-top:6px">Last request: <span id="lastReq">-</span></div>
            </div>
          </div>

          <div class="card-mini">
            <div class="muted">Usage</div>
            <div style="margin-top:8px">
              <div class="small">Endpoint (V1): <code class="small">/api/tiktok?url=</code></div>
              <div class="small">Endpoint (V2): <code class="small">/api/tiktokv2?url=</code></div>
            </div>
          </div>

          <div class="card-mini" style="display:flex;flex-direction:column;gap:8px;align-items:flex-start;">
            <div class="muted">Creator</div>
            <div style="font-weight:700">donzy</div>
            <div class="small">Built with ♡</div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div>Made for <strong>api-donzy</strong></div>
        <div class="small">Tip: gunakan URL lengkap (https://...)</div>
      </div>
    </div>
  </div>

<script>
  // Helpers
  const urlInput = document.getElementById('urlInput');
  const btnGet = document.getElementById('btnGet');
  const btnGetV2 = document.getElementById('btnGetV2');
  const jsonOutput = document.getElementById('jsonOutput');
  const jsonBox = document.getElementById('jsonBox');
  const btnCopy = document.getElementById('btnCopy');
  const btnDownload = document.getElementById('btnDownload');
  const btnClear = document.getElementById('btnClear');
  const endpointUrl = document.getElementById('endpointUrl');
  const copyEndpoint = document.getElementById('copyEndpoint');
  const statusTag = document.getElementById('statusTag');
  const lastReq = document.getElementById('lastReq');

  let lastResponse = null;

  function setStatus(text, color){
    statusTag.textContent = text;
    statusTag.style.color = color || 'var(--muted)';
  }

  function prettyJson(obj){
    try {
      return JSON.stringify(obj, null, 2);
    } catch (e) {
      return String(obj);
    }
  }

  // syntax highlighting for JSON (basic)
  function syntaxHighlight(json){
    if (typeof json != 'string') json = JSON.stringify(json, null, 2);
    json = json
      .replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    return json.replace(
      /("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(?:\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,
      match => {
        let cls = 'number';
        if (/^"/.test(match)) {
          if (/:$/.test(match)) {
            cls = 'key';
          } else {
            cls = 'string';
          }
        } else if (/true|false/.test(match)) {
          cls = 'boolean';
        } else if (/null/.test(match)) {
          cls = 'null';
        }
        const colors = {
          key: 'color: #9be7ff; font-weight:600',
          string: 'color: #b7f0a1',
          number: 'color: #ffd58a',
          boolean: 'color: #ffb86b',
          null: 'color: #9aa6ff'
        };
        return `<span style="${colors[cls]}">${match}</span>`;
      }
    );
  }

  function displayJson(obj){
    lastResponse = obj;
    jsonOutput.innerHTML = syntaxHighlight(obj);
  }

  function setEndpoint(path){
    // show full path relative to origin
    const full = location.origin + path;
    endpointUrl.textContent = full;
  }

  // initial
  setEndpoint('/api/tiktok?url=');

  // Fetch wrapper
  async function fetchApi(path, url){
    setStatus('loading', '#ffd166');
    lastReq.textContent = new Date().toLocaleTimeString();
    try {
      const res = await fetch(path + encodeURIComponent(url));
      const data = await res.json();
      displayJson(data);
      setStatus(res.ok ? 'ok' : 'error', res.ok ? 'var(--success)' : 'var(--danger)');
      return data;
    } catch (err) {
      const e = { status: false, error: String(err) };
      displayJson(e);
      setStatus('error', 'var(--danger)');
      return e;
    }
  }

  btnGet.addEventListener('click', async () => {
    const link = urlInput.value.trim();
    if (!link) { alert('Masukkan URL TikTok terlebih dahulu'); urlInput.focus(); return; }
    setEndpoint('/api/tiktok?url=');
    await fetchApi(location.origin + '/api/tiktok?url=', link);
  });

  btnGetV2.addEventListener('click', async () => {
    const link = urlInput.value.trim();
    if (!link) { alert('Masukkan URL TikTok terlebih dahulu'); urlInput.focus(); return; }
    setEndpoint('/api/tiktokv2?url=');
    await fetchApi(location.origin + '/api/tiktokv2?url=', link);
  });

  copyEndpoint.addEventListener('click', () => {
    const txt = endpointUrl.textContent;
    navigator.clipboard.writeText(txt).then(() => {
      copyEndpoint.textContent = 'Copied!';
      setTimeout(()=> copyEndpoint.textContent = 'Copy', 1400);
    });
  });

  btnCopy.addEventListener('click', () => {
    if (!lastResponse) return alert('Belum ada response untuk dicopy');
    const txt = prettyJson(lastResponse);
    navigator.clipboard.writeText(txt).then(() => {
      btnCopy.textContent = 'Copied';
      btnCopy.classList.add('copy-success');
      setTimeout(()=> { btnCopy.textContent = 'Copy Response'; btnCopy.classList.remove('copy-success'); }, 1400);
    });
  });

  btnDownload.addEventListener('click', () => {
    if (!lastResponse) return alert('Belum ada response untuk didownload');
    const blob = new Blob([ prettyJson(lastResponse) ], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'donzy-response-' + Date.now() + '.json';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  btnClear.addEventListener('click', () => {
    jsonOutput.textContent = 'No response yet. Paste a TikTok URL and click Get.';
    lastResponse = null;
    setStatus('idle', 'var(--muted)');
    lastReq.textContent = '-';
  });

  // allow Enter to trigger Get
  urlInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') btnGet.click();
  });

  // On load show a sample quick-tip response
  jsonOutput.innerHTML = '<span style="color:var(--muted)">Ready — paste TikTok url above and press Get.</span>';
</script>
</body>
</html>
